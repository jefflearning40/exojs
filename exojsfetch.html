<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fetch</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
</head>
<body>
    <!-- le flecth demo 1 -->
    <!-- <button id="demarrer" class="btn btn-succes">Lancer la promesse</button>
    <p id="message"></p> -->

    <!-- <script>
  // Cibler les éléments de la page
  let bouton = document.getElementById("demarrer");
  let message = document.getElementById("message");

  // Quand on clique sur le bouton
  bouton.addEventListener("click", function () {
    // On crée une promesse qui réussit toujours
    let promesse = new Promise(function (resolve, reject) {
      resolve("Tout s'est bien passé !");
    });

    // Quand la promesse réussit, on affiche le message
    promesse.then(function (resultat) {
      message.textContent = resultat;
    });
  });
</script> -->
      
<!-- le flecth demo 2 -->

 <!-- <button id="lancer-chainage" class="btn-btn-primary">Démarrer</button>
 <p id="resultat-chainage"></p>

 <script>
     let bouton = document.getElementById("lancer-chainage");
  let affichage = document.getElementById("resultat-chainage");

  function operation1() {
    return Promise.resolve("Étape 1");
  }

  function operation2(resultatPrecedent) {
    return Promise.resolve(resultatPrecedent + " > Étape 2");
  }

  bouton.addEventListener("click", function () {
    operation1()
      .then(operation2)
      .then(function (resultatFinal) {
        affichage.textContent = resultatFinal;
      });
  });
 </script> -->

 <!-- le fletch demo 3------------------------------------------------------------------------ -->
<!-- <button id="btn-attendre" class="btn btn-info">Dire bonjour</button>
<p id="texte-bonjour"></p>

<script>
  let bouton = document.getElementById("btn-attendre");
  let texte = document.getElementById("texte-bonjour");

  // Fonction qui retourne une promesse qui se résout après un temps donné
  function attendre(ms) {
    return new Promise(function(resolve) {
      setTimeout(resolve, ms);
    });
  }

  // Fonction asynchrone qui utilise await pour attendre
  async function direBonjour() {
    texte.textContent = "Préparation...";
    await attendre(1000); // on attend 1 seconde
    
    texte.textContent = "Bonjour après 1 seconde !";
  }

  bouton.addEventListener("click", function () {
    direBonjour();
  });
</script> -->
<!-- ----------------le fletch demo 4-------------------------------------- -->

<!-- <button id="btn-api" class="btn btn-warning">Charger un article</button>
<p id="api-resultat"></p>

<script>
    let bouton = document.getElementById("btn-api");
    let affichage = document.getElementById("api-resultat");

    bouton.addEventListener("click", function () {
        fetch("https://jsonplaceholder.typicode.com/posts/1")
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                affichage.textContent = "Titre : " + data.title;

                // Utilisation de setTimeout pour afficher le message après 2 secondes
                setTimeout(function() {

                    affichage.textContent += " c'est en latin...";
                }, 2000);
            })
            .catch(function (error) {
                affichage.textContent = "Erreur lors du chargement : " + error;
            });
    });
</script> -->

 <!-------------------------------------- le fletch demo 5 -------------------------------->

<!-- <button id="btn-await" class="btn btn-secondary">Charger un post</button>
<p id="resultat-await"></p>
<script>

  let bouton = document.getElementById("btn-await");
  let zoneAffichage = document.getElementById("resultat-await");

  async function chargerPost() {
    zoneAffichage.textContent = "Chargement...";

    try {
      // On attend la réponse du serveur
      let reponse = await fetch("https://jsonplaceholder.typicode.com/posts/1");

      // On attend la conversion en JSON
      let data = await reponse.json();

      // On affiche le résultat
      zoneAffichage.textContent = "Titre : " + data.title;
    } catch (erreur) {
      // En cas d’erreur (réseau, JSON mal formé, etc.)
      zoneAffichage.textContent = "Erreur : " + erreur.message;
    }
  }

  // Quand on clique, on déclenche la fonction
  bouton.addEventListener("click", chargerPost);
</script> -->

<!-- -------------------------------demo fetch 6--------------------------------- -->
 <div id="resultat"></div>
 <script>
  async function chargerAnimaux() {

  try {
    const reponse = await fetch("data.json"); // attention au chemin !
    const animaux = await reponse.json();

    const zoneResultat = document.getElementById("resultat");
    zoneResultat.innerHTML = ""; // on vide avant d’ajouter

    animaux.forEach(animal => {
      const p = document.createElement("p");
      p.textContent = `${animal.nom} est un ${animal.espece}`;
      zoneResultat.appendChild(p);
    });
  } catch (erreur) {
    console.error("Oups, une erreur est survenue :", erreur);
  }
}

chargerAnimaux();
 </script>
    
</body>
</html>